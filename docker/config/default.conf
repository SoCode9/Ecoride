<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        AllowOverride None
        Require all granted
        Options -Indexes -MultiViews +FollowSymLinks
    </Directory>

    Alias /icons/ /var/www/html/icons/
    <Directory "/var/www/html/icons">
        Require all granted
        Options -Indexes +FollowSymLinks
        AllowOverride None
    </Directory>


    ErrorLog  /var/log/apache2/error.log
    CustomLog /var/log/apache2/access.log combined

    <IfModule mod_rewrite.c>
        RewriteEngine On

        # 1) Ne réécrit JAMAIS un vrai fichier/dossier
        RewriteCond %{REQUEST_FILENAME} -f [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^ - [L]

        # 2) Ne réécrit JAMAIS un .php explicite
        RewriteRule \.php$ - [L]

        # 3) Ne réécrit JAMAIS les assets
        RewriteRule \.(?:css|js|png|jpe?g|gif|svg|ico|webp|woff2?|ttf|eot)$ - [L]

        # 4) Fallback front-controller
        RewriteRule ^ index.php [QSA,L]
    </IfModule>
</VirtualHost>